---
layout : post
title : 同源策略详解
category : web
tagline : "author: ChangSiyuan"
tags : [Web]
---
{% include JB/setup %}

### 什么是同源策略
- 同源策略是Netscape提出的一个著名的安全策略；
- 同源策略是浏览器最核心最基础的安全策略；
- 现在所有的可支持javascript的浏览器都会使用这个策略；
- web构建在同源策略基础之上，浏览器对非同源脚本的限制措施是对同源策略的具体实现；
- 本文详细说明了同源策略的含义，用具体的例子让您深入理解同源策略，并且对跨域访问的几种常用机制作了说明；

### 同源策略的含义详解
- 含义一（DOM层面的同源策略）：限制了来自不同源的”document”对象或js脚本，对当前“document”对象的读取或设置某些属性；
- 含义二（Cookie和XMLHttprequest层面的同源策略）：只有和本网页同源的脚本才会被执行，有时，AJAX已经加载不同源的脚本，但绝对不会被执行；
- 含义三（同源策略的非绝对性）：同源策略通常允许进行跨域写操作、通常允许跨域资源嵌入、通常不允许跨域读操作；
<script><img><iframe><link><video><audio>等带有src属性的标签可以从不同的域加载和执行资源，同源策略关注的是加载js的页面所在的域，而不是页面内存放的js文件的域；
- 含义四（其他插件的同源策略）：flash、java applet、silverlight、coogle gears等浏览器加载的第三方插件也有各自的同源策略，只是这些同源策略不属于浏览器原生的同源策略，如果有漏洞则可能被黑客利用，从而留下XSS攻击的后患；

### 几个同源策略理解上的常见问题的解释
- 没有同源策略会怎样？为什么同源策略禁止跨域读操作？

> * 设想你打开了一个银行网站，又打开了一个恶意网站，如果没有同源策略，将会：
恶意网站包含了脚本a.js，银行网站在没有加载此脚本的情况下，就可以被此脚本操纵，操纵的后果是：
银行网站页面DOM结构被篡改；
银行网站页面DOM元素的属性和值被篡改；
银行页面发送的表单信息可能被恶意脚本接收到，造成用户名密码泄漏；
恶意网站通过自己加载的恶意js脚本获取了银行网站用户的cookie信息，并将它发送给了银行网站，随后，恶意网站就可以自动的、不受用户限制的、在用户不知情的情况下登录用户的银行网站并且伪装用户发送转账等请求；

- 有了同源策略会怎样?同源策略给予浏览器用户怎么样的保护？

